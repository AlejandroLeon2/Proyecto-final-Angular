<form
  (ngSubmit)="onSearch()"
  class="flex flex-col justify-center min-w-40 h-10 rounded-lg focus-within:ring-1 focus-within:ring-white"
  >
  <div class="flex w-full flex-1 rounded-lg h-full">
    <label
      for="searchInput"
      class="flex items-center justify-center pl-3 rounded-l-lg border-r-0 text-[var(--text-soft)] bg-[var(--bg-input)]"
    >
    <lucide-icon [img]="search"></lucide-icon>
    </label>

    <input
      id="searchInput"
      name="searchInput"

      (keyup)="onSearch()"

      class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg rounded-l-none text-[var(--text-main)] border border-[var(--bg-input)] h-full placeholder:text-[var(--text-soft)] pl-2 text-sm font-normal focus:outline-none focus:ring-0 focus:border-transparent"
      placeholder="Search products..."
      [(ngModel)]="wordKey"
    />
  </div>
  <!-- si wordKey tiene contenido mostramos resultados -->
  @if (wordKey.length > 0) {
      <div 
    class="absolute top-15 left-0 h-[90vh] absolute w-full top-15 left-0 h-[90vh]  bg-[#0000008a] flex flex-col overflow-y-auto rounded-b-lg items-center">
    
    <!-- contenedor de conincidencias del search -->
    @if (resultados.success){
      @for( product of resultados.data?.products; track product.id) {
        <!-- mostramos imagen , nombre y precio del producto -->
        <div 
          class="flex items-center p-2 border-b border-[var(--bg-input)] hover:bg-[var(--bg-input-hover)] cursor-pointer"
           (click)="onSelectProduct(product)">

          <!-- Imagen del producto -->
          <img 
            [src]="product.image" 
            alt="{{product.name}}" 
            class="w-12 h-12 object-cover rounded-md mr-4" />

          <!-- Contenedor de informaciÃ³n del producto -->
          <div class="flex flex-col justify-center p-2 bg-[var(--bg-main)] rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 w-full">
            <span class="text-sm font-semibold text-[var(--text-main)] truncate">
              {{ product.name }}
            </span>
            <span class="text-xs text-[var(--text-soft)] mt-1">
              ${{ product.price }}
            </span>
          </div>

        </div>

      }
    }
    @else {
      <div class=" p-2 text-sm text-[var(--text-soft)]">
        {{resultados.message}} 
      </div>
    }
  </div>
  }
</form>
