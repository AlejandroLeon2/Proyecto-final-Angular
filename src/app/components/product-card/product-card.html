<div class="group max-w-xs bg-[var(--bg-card)] border border-[var(--border)] transition-all duration-300 hover:border-[var(--text-soft)]">
  
  <!-- Imagen del producto -->
  <div
    [routerLink]="['/shop', 'product-detail', product.id]"
    class="relative aspect-square overflow-hidden bg-[var(--bg-alt)] cursor-pointer"
  >
    <img
      [src]="product.image"
      [alt]="product.name"
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
      loading="lazy"
    />

    <!-- Badge de sin stock -->
    @if (isOutOfStock()) {
    <div class="absolute inset-0 bg-[var(--bg-card)]/95 flex items-center justify-center">
      <span class="text-[var(--text-muted)] text-sm font-medium tracking-wide">Agotado</span>
    </div>
    }
  </div>

  <!-- Contenido -->
  <div class="p-5 space-y-4">
    
    <!-- Header -->
    <div class="space-y-2">
      <span class="text-xs uppercase tracking-wider text-[var(--text-soft)]">
        {{ product.category }}
      </span>
      
      <h3 class="text-base font-medium text-[var(--text-main)] line-clamp-2 leading-snug">
        {{ product.name }}
      </h3>
    </div>

    <!-- Footer -->
    <div class="flex items-center justify-between pt-2 border-t border-[var(--border)]">
      <span class="text-lg font-light text-[var(--text-main)]">
        {{ product.price | currency: 'PEN':'symbol':'1.2' }}
      </span>
      
      <button
        (click)="addToCart()"
        [disabled]="!user || isOutOfStock()"
        class="w-9 h-9 flex items-center justify-center border border-[var(--border)] text-[var(--text-main)] hover:bg-[var(--text-main)] hover:text-[var(--bg-card)] hover:border-[var(--text-main)] disabled:opacity-30 disabled:cursor-not-allowed transition-all duration-200"
        [attr.aria-label]="'Agregar ' + product.name + ' al carrito'"
      >
        <lucide-icon [img]="shoppingCartIcon" size="16"></lucide-icon>
      </button>
    </div>
  </div>
</div>