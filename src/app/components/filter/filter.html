<div class="filter-container">
  <h2 class="filter-title">Filtros</h2>

  @if (searchWord.trim().length !> 0) {
    <div class="w-full h-7 bg-[var(--bg-main)] border border-[var(--border)] rounded-[5px] text-[var(--text-main)] px-3 flex justify-between">
      {{searchWord}}
      <button 
        (click)="loadSearchWord(`delete`)"
        class="cursor-pointer hover:scale-[1.1]">
        <lucide-icon [img]="clear"></lucide-icon>
      </button>
    </div>
  }

  <div class="filter-section">
    <button
      type="button"
      (click)="toggleCategorySection()"
      class="filter-section-header"
      [attr.aria-expanded]="categoryExpanded()"
    >
      <span class="filter-section-title">Categor√≠a</span>
      <span class="filter-section-icon">
        @if (categoryExpanded()) {
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m18 15-6-6-6 6" />
          </svg>
        } @else {
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m6 9 6 6 6-6" />
          </svg>
        }
      </span>
    </button>

    @if (categoryExpanded()) {
      <div class="filter-section-content">
        @for (cat of categoriesSignal(); track cat.id) {
          <label class="filter-checkbox-label">
            <input
              type="checkbox"
              [checked]="isCategorySelected(cat.id)"
              (change)="onCategoryChange(cat.id, $event)"
              class="filter-checkbox"
            />
            <span class="filter-checkbox-text">{{ cat.name }}</span>
          </label>
        } @empty {
            <p class="text-sm text-gray-400 p-2">Cargando...</p>
        }
      </div>
    }
  </div>

  <button
    type="button"
    (click)="clearFilters()"
    [disabled]="!hasActiveFilters()"
    class="clear-filters-button"
  >
    Limpiar Filtros
  </button>
</div>